{"version":3,"sources":["webpack:///./src/views/getFields.js","webpack:///./src/views/admin/ShowOrders.vue?51e4","webpack:///src/views/admin/ShowOrders.vue","webpack:///./src/views/admin/ShowOrders.vue?84b2","webpack:///./src/views/admin/ShowOrders.vue"],"names":["fields","key","label","module","exports","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","displayForm","options","on","selectForm","model","value","init","callback","$$v","$set","expression","showBy","list","$event","card","_l","timeItem","tabItem","time","orders","length","_s","order","is_take","no","switchTakeStatus","order_time","name","phone","take_time","staticStyle","editOrder","parseDetail","domProps","noteTohtml","note","count","sum","_e","list_fields","editModal","scopedSlots","_u","fn","editCancel","editConfirm","proxy","editingOrder","order_time_format","orderTime","detail","ref","item","getItemSum","getOrderCount","getOrderSum","isLoading","staticRenderFns","data","adminDoc","formListSheet","formListRows","interval","ori","noon","not_take","night","viewList","justifyPrice","itemList","rows","byKey","menu","components","Loading","created","accessSpreadSheet","autoUpdate","methods","setOrdersData","_record","JSON","parse","index","push","setInterval","console","log","stopUpdate","clearInterval","price","number","getOrderData","_item","replaceAll","orderData","_number","_sum","_fullMenu","title","component"],"mappings":"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","file":"js/chunk-7c526d12.cae33f90.js","sourcesContent":["const fields = [\r\n    {\r\n      key: 'title',\r\n      label: '餐點',\r\n    },\r\n    {\r\n      key: 'number',\r\n      label: '數量',\r\n    },\r\n    {\r\n      key: 'sum',\r\n      label: '小計',\r\n    }\r\n  ];\r\n\r\nmodule.exports = {\r\n    fields,\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-form',{staticClass:\"mb-4\",attrs:{\"inline\":\"\"}},[_c('label',{staticClass:\"mr-sm-2\"},[_vm._v(\"表單\")]),_c('b-form-select',{staticClass:\"mb-2 mr-sm-2 mb-sm-0\",attrs:{\"options\":_vm.displayForm.options,\"size\":\"lg\"},on:{\"change\":_vm.selectForm},model:{value:(_vm.displayForm.init.sheetTitle),callback:function ($$v) {_vm.$set(_vm.displayForm.init, \"sheetTitle\", $$v)},expression:\"displayForm.init.sheetTitle\"}}),_c('b-button',{staticClass:\"mx-2\",attrs:{\"pressed\":_vm.showBy.list,\"size\":\"lg\",\"variant\":\"primary\"},on:{\"update:pressed\":function($event){return _vm.$set(_vm.showBy, \"list\", $event)},\"click\":function($event){_vm.showBy.card=false}}},[_c('b-icon',{attrs:{\"icon\":\"card-list\",\"aria-label\":\"List\"}})],1),_c('b-button',{attrs:{\"pressed\":_vm.showBy.card,\"size\":\"lg\",\"variant\":\"primary\"},on:{\"update:pressed\":function($event){return _vm.$set(_vm.showBy, \"card\", $event)},\"click\":function($event){_vm.showBy.list=false}}},[_c('b-icon',{attrs:{\"icon\":\"columns\",\"aria-label\":\"columns\"}})],1)],1),_c('b-tabs',{attrs:{\"pills\":\"\",\"card\":\"\"}},[_vm._l((_vm.viewList),function(timeItem){return _vm._l((timeItem.tabs),function(tabItem){return _c('b-tab',{key:timeItem.time + tabItem.key,attrs:{\"title\":tabItem.label + '(' + _vm.orders[timeItem.time][tabItem.key].length + ')'}},[_c('div',[_vm._v(\"共 \"),_c('span',[_vm._v(_vm._s(_vm.orders[timeItem.time][tabItem.key].length))]),_vm._v(\" 筆\")]),(_vm.showBy.card)?_c('div',{staticClass:\"card-columns\"},_vm._l((_vm.orders.ori),function(order,key){return _c('transition',{key:'order' + key,attrs:{\"leave-active-class\":'animate__animated ' + (order.is_take ? 'animate__rotateOutUpLeft' : 'animate__rotateOutUpRight')}},[(order.time == timeItem.time && order.is_take == tabItem.is_take)?_c('CCard',{staticClass:\"my-4\"},[_c('CCardHeader',{staticClass:\"d-flex align-items-center\"},[_c('h5',[_vm._v(\"訂單編號\")]),_c('h3',[_vm._v(_vm._s(order.no))]),_c('CSwitch',{staticClass:\"mx-1 float-right\",attrs:{\"size\":\"sm\",\"color\":\"warning\",\"variant\":\"3d\",\"checked\":order.is_take},on:{\"update:checked\":[function($event){return _vm.$set(order, \"is_take\", $event)},function($event){return _vm.switchTakeStatus(order)}]}}),_c('small',[_vm._v(_vm._s(order.order_time)),_c('br'),_vm._v(_vm._s(order.name)+\"(\"+_vm._s(order.phone)+\")\"),_c('br'),_vm._v(_vm._s(order.take_time))]),_c('CButton',{staticClass:\"position-absolute\",staticStyle:{\"right\":\"10px\"},attrs:{\"color\":\"secondary\"},on:{\"click\":function($event){return _vm.editOrder(key)}}},[_vm._v(\" 編輯 \")])],1),_c('CCardBody',[_c('CDataTable',{attrs:{\"border\":\"\",\"items\":order.parseDetail,\"fields\":_vm.fields}}),_c('div',[_vm._v(\"備註：\")]),_c('h3',{domProps:{\"innerHTML\":_vm._s(_vm.noteTohtml(order.note))}}),_c('div',{staticClass:\"p-3 bg-warning text-white text-center\"},[_vm._v(\"總計 \"),_c('span',[_vm._v(_vm._s(order.count))]),_vm._v(\" 樣菜 / 共 \"),_c('span',[_vm._v(\"$\"+_vm._s(order.sum))])])],1)],1):_vm._e()],1)}),1):_vm._e(),(_vm.showBy.list)?_c('div',[_c('CDataTable',{attrs:{\"border\":\"\",\"items\":_vm.orders[timeItem.time][tabItem.key],\"fields\":_vm.list_fields}})],1):_vm._e()])})})],2),_c('CModal',{attrs:{\"title\":\"編輯訂單\",\"show\":_vm.editModal,\"color\":\"warning\",\"size\":\"lg\",\"closeOnBackdrop\":false},on:{\"update:show\":function($event){_vm.editModal=$event}},scopedSlots:_vm._u([{key:\"footer\",fn:function(){return [_c('CButton',{attrs:{\"color\":\"danger\"},on:{\"click\":_vm.editCancel}},[_vm._v(\"返回\")]),_c('CButton',{attrs:{\"color\":\"success\"},on:{\"click\":_vm.editConfirm}},[_vm._v(\"送出\")])]},proxy:true}])},[_c('CSelect',{attrs:{\"value\":_vm.editingOrder.order_time_format,\"label\":\"取餐時間：\",\"options\":_vm.orderTime,\"size\":\"lg\",\"horizontal\":\"\"},on:{\"update:value\":function($event){return _vm.$set(_vm.editingOrder, \"order_time_format\", $event)}}}),_c('CInput',{attrs:{\"label\":\"姓名：\",\"placeholder\":\"取餐人姓名\",\"size\":\"lg\"},model:{value:(_vm.editingOrder.name),callback:function ($$v) {_vm.$set(_vm.editingOrder, \"name\", $$v)},expression:\"editingOrder.name\"}}),_c('CInput',{attrs:{\"label\":\"電話：\",\"placeholder\":\"取餐人電話\",\"size\":\"lg\"},model:{value:(_vm.editingOrder.phone),callback:function ($$v) {_vm.$set(_vm.editingOrder, \"phone\", $$v)},expression:\"editingOrder.phone\"}}),_c('hr'),_c('CDataTable',{attrs:{\"border\":\"\",\"items\":_vm.editingOrder.detail,\"fields\":_vm.fields},scopedSlots:_vm._u([{key:\"number\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('td',[_c('b-form-spinbutton',{attrs:{\"id\":\"sb-inline\",\"size\":\"lg\",\"min\":\"-5\",\"max\":\"10\",\"inline\":\"\",\"variant\":\"warning\"},model:{value:(item.number),callback:function ($$v) {_vm.$set(item, \"number\", $$v)},expression:\"item.number\"}})],1)]}},{key:\"sum\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('td',[_vm._v(\" \"+_vm._s(_vm.getItemSum(item))+\" \")])]}}])}),_c('CInput',{attrs:{\"label\":\"其他金額\",\"placeholder\":\"其他金額\",\"horizontal\":\"\",\"size\":\"lg\"},model:{value:(_vm.editingOrder.justifyPrice),callback:function ($$v) {_vm.$set(_vm.editingOrder, \"justifyPrice\", $$v)},expression:\"editingOrder.justifyPrice\"}}),_c('div',{staticClass:\"p-2 mb-2 bg-warning text-white text-center\"},[_vm._v(\"總計 \"),_c('span',[_vm._v(_vm._s(_vm.getOrderCount(_vm.editingOrder.detail)))]),_vm._v(\" 樣菜 / 共 \"),_c('span',[_vm._v(\"$\"+_vm._s(_vm.getOrderSum(_vm.editingOrder)))])]),_c('hr'),_c('CTextarea',{attrs:{\"label\":\"備註\",\"size\":\"lg\"},model:{value:(_vm.editingOrder.note),callback:function ($$v) {_vm.$set(_vm.editingOrder, \"note\", $$v)},expression:\"editingOrder.note\"}})],1),_c('Loading',{attrs:{\"isLoading\":_vm.isLoading}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <b-form inline class=\"mb-4\">\r\n      <label class=\"mr-sm-2\">表單</label>\r\n      <b-form-select\r\n        class=\"mb-2 mr-sm-2 mb-sm-0\"\r\n        :options=\"displayForm.options\"\r\n        v-model=\"displayForm.init.sheetTitle\"\r\n        @change=\"selectForm\"\r\n        size=\"lg\"\r\n      ></b-form-select>\r\n      <b-button :pressed.sync=\"showBy.list\" size=\"lg\" variant=\"primary\" class=\"mx-2\" @click=\"showBy.card=false\">\r\n        <b-icon icon=\"card-list\" aria-label=\"List\"></b-icon>\r\n      </b-button>\r\n      <b-button :pressed.sync=\"showBy.card\" size=\"lg\" variant=\"primary\" @click=\"showBy.list=false\">\r\n        <b-icon icon=\"columns\" aria-label=\"columns\"></b-icon>\r\n      </b-button>\r\n    </b-form>\r\n    \r\n    <b-tabs pills card>\r\n      <template v-for=\"timeItem in viewList\">\r\n        <b-tab :title=\"tabItem.label + '(' + orders[timeItem.time][tabItem.key].length + ')'\" v-for=\"tabItem in timeItem.tabs\" :key=\"timeItem.time + tabItem.key\">\r\n          <div>共 <span>{{ orders[timeItem.time][tabItem.key].length }}</span> 筆</div>\r\n          <div class=\"card-columns\" v-if=\"showBy.card\">\r\n            <transition\r\n              :leave-active-class=\"'animate__animated ' + (order.is_take ? 'animate__rotateOutUpLeft' : 'animate__rotateOutUpRight')\"\r\n              :key=\"'order' + key\"\r\n              v-for=\"(order, key) in orders.ori\"\r\n            >\r\n              <CCard\r\n                class=\"my-4\"\r\n                v-if=\"order.time == timeItem.time && order.is_take == tabItem.is_take\"\r\n              >\r\n                <CCardHeader class=\"d-flex align-items-center\">\r\n                  <h5>訂單編號</h5><h3>{{ order.no }}</h3>\r\n                  <CSwitch\r\n                    class=\"mx-1 float-right\" size=\"sm\" color=\"warning\" variant=\"3d\"\r\n                    :checked.sync=\"order.is_take\"\r\n                    @update:checked=\"switchTakeStatus(order)\"\r\n                  />\r\n                  <small>{{ order.order_time }}<br>{{ order.name }}({{ order.phone }})<br>{{ order.take_time }}</small>\r\n                  <CButton\r\n                    class=\"position-absolute\"\r\n                    color=\"secondary\"\r\n                    style=\"right:10px;\"\r\n                    @click=\"editOrder(key)\"\r\n                  >\r\n                    編輯\r\n                  </CButton>\r\n                </CCardHeader>\r\n                <CCardBody>\r\n                  <CDataTable\r\n                    border\r\n                    :items=\"order.parseDetail\"\r\n                    :fields=\"fields\"\r\n                  >\r\n                  </CDataTable>\r\n                  <div>備註：</div>\r\n                  <h3 v-html=\"noteTohtml(order.note)\"></h3>\r\n                  <div class=\"p-3 bg-warning text-white text-center\">總計 <span>{{ order.count }}</span> 樣菜 / 共 <span>${{ order.sum }}</span></div>\r\n                </CCardBody>\r\n              </CCard>\r\n            </transition>\r\n          </div>\r\n          <div v-if=\"showBy.list\">\r\n            <CDataTable\r\n              border\r\n              :items=\"orders[timeItem.time][tabItem.key]\"\r\n              :fields=\"list_fields\"\r\n            >\r\n            </CDataTable>\r\n          </div>\r\n        </b-tab>\r\n      </template>\r\n\r\n      <!-- <b-tab title=\"未取\" active>\r\n        <div>共 <span>{{ count.not_take }}</span> 筆</div>\r\n        <div class=\"card-columns\" v-if=\"showBy.card\">\r\n          <transition\r\n            leave-active-class=\"animate__animated animate__rotateOutUpRight\"\r\n            @enter=\"countTakeNumber()\"\r\n            @after-enter=\"switchTakeStatus(order)\"\r\n            :key=\"'order' + key\"\r\n            v-for=\"(order, key) in orders\"\r\n          >\r\n            <CCard\r\n              class=\"my-4\"\r\n              v-if=\"!order.is_take\"\r\n            >\r\n              <CCardHeader class=\"d-flex align-items-center\">\r\n                <h5>訂單編號</h5><h3>{{ order.no }}</h3>\r\n                <CSwitch\r\n                  class=\"mx-1 float-right\" size=\"sm\" color=\"warning\" variant=\"3d\"\r\n                  :checked.sync=\"order.is_take\"\r\n                />\r\n                <small>{{ order.order_time }}<br>{{ order.name }}({{ order.phone }})</small>\r\n                <CButton\r\n                  class=\"position-absolute\"\r\n                  color=\"secondary\"\r\n                  style=\"right:10px;\"\r\n                  @click=\"editOrder(key)\"\r\n                >\r\n                  編輯\r\n                </CButton>\r\n              </CCardHeader>\r\n              <CCardBody>\r\n                <CDataTable\r\n                  border\r\n                  :items=\"order.parseDetail\"\r\n                  :fields=\"fields\"\r\n                >\r\n                </CDataTable>\r\n                <div>備註：</div>\r\n                <h3 v-html=\"noteTohtml(order.note)\"></h3>\r\n                <div class=\"p-3 bg-warning text-white text-center\">總計 <span>{{ order.count }}</span> 樣菜 / 共 <span>${{ order.sum }}</span></div>\r\n              </CCardBody>\r\n            </CCard>\r\n          </transition>\r\n        </div>\r\n      </b-tab>\r\n      <b-tab title=\"已取\">\r\n        <div>共 <span>{{ count.is_take }}</span> 筆</div>\r\n        <div class=\"card-columns\" v-if=\"showBy.card\">\r\n          <transition\r\n            leave-active-class=\"animate__animated animate__rotateOutUpLeft\"\r\n            @enter=\"countTakeNumber()\"\r\n            @after-enter=\"switchTakeStatus(order)\"\r\n            :key=\"'order' + key\"\r\n            v-for=\"(order, key) in orders\"\r\n          >\r\n            <CCard\r\n              class=\"my-4\"\r\n              v-if=\"order.is_take\"\r\n            >\r\n              <CCardHeader class=\"d-flex align-items-center\">\r\n                <h5>訂單編號</h5><h3>{{ order.no }}</h3>\r\n                <CSwitch\r\n                  class=\"mx-1 float-right\" size=\"sm\" color=\"warning\" variant=\"3d\"\r\n                  :checked.sync=\"order.is_take\"\r\n                  @update:checked=\"switchTakeStatus(order)\"\r\n                />\r\n                <small>{{ order.order_time }}<br>{{ order.name }}({{ order.phone }})</small>\r\n              </CCardHeader>\r\n              <CCardBody>\r\n                <CDataTable\r\n                  border\r\n                  :items=\"order.parseDetail\"\r\n                  :fields=\"fields\"\r\n                >\r\n                </CDataTable>\r\n                <span>其他：{{ order.justifyPrice }}</span>\r\n                <div>備註：</div>\r\n                <h3 v-html=\"order.note\"></h3>\r\n                <div class=\"p-3 bg-warning text-white text-center\">總計 <span>{{ order.count }}</span> 樣菜 / 共 <span>${{ order.sum }}</span></div>\r\n              </CCardBody>\r\n            </CCard>\r\n          </transition>\r\n        </div>\r\n      </b-tab> -->\r\n    </b-tabs>\r\n\r\n    <CModal\r\n      title=\"編輯訂單\"\r\n      :show.sync=\"editModal\"\r\n      color=\"warning\"\r\n      size=\"lg\"\r\n      :closeOnBackdrop=\"false\"\r\n    >\r\n      <CSelect\r\n        :value.sync=\"editingOrder.order_time_format\"\r\n        label=\"取餐時間：\"\r\n        :options=\"orderTime\"\r\n        size=\"lg\"\r\n        horizontal\r\n      />\r\n      <CInput \r\n        v-model=\"editingOrder.name\"\r\n        label=\"姓名：\"\r\n        placeholder=\"取餐人姓名\"\r\n        size=\"lg\"\r\n      />\r\n      <CInput \r\n        v-model=\"editingOrder.phone\"\r\n        label=\"電話：\"\r\n        placeholder=\"取餐人電話\"\r\n        size=\"lg\"\r\n      />\r\n      <hr>\r\n      <CDataTable\r\n        border\r\n        :items=\"editingOrder.detail\"\r\n        :fields=\"fields\"\r\n      >\r\n        <template #number=\"{item}\">\r\n          <td>\r\n            <b-form-spinbutton id=\"sb-inline\" v-model=\"item.number\" size=\"lg\" min=\"-5\" max=\"10\" inline variant=\"warning\"></b-form-spinbutton>\r\n          </td>\r\n        </template>\r\n        <template #sum=\"{item}\">\r\n          <td>\r\n            {{ getItemSum(item) }}\r\n          </td>\r\n        </template>\r\n      </CDataTable>\r\n      <CInput \r\n        v-model=\"editingOrder.justifyPrice\"\r\n        label=\"其他金額\"\r\n        placeholder=\"其他金額\"\r\n        horizontal\r\n        size=\"lg\"\r\n      />\r\n      <div class=\"p-2 mb-2 bg-warning text-white text-center\">總計 <span>{{ getOrderCount(editingOrder.detail) }}</span> 樣菜 / 共 <span>${{ getOrderSum(editingOrder) }}</span></div>\r\n      <hr>\r\n      <CTextarea\r\n        v-model=\"editingOrder.note\"\r\n        label=\"備註\"\r\n        size=\"lg\"\r\n      />\r\n      \r\n      <template #footer>\r\n        <CButton @click=\"editCancel\" color=\"danger\">返回</CButton>\r\n        <CButton @click=\"editConfirm\" color=\"success\">送出</CButton>\r\n      </template>\r\n    </CModal>\r\n    \r\n    <Loading :isLoading=\"isLoading\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport moment from 'moment'\r\nimport Loading from '@/views/Loading'\r\n\r\nimport { getMenu } from '@/views/getMenu';\r\nimport { getSettingDoc } from '@/gapi/getSettingDoc';\r\nimport { getOrderDoc } from '@/gapi/getOrderDoc';\r\nimport { fields } from '@/views/getFields';\r\nimport 'animate.css';\r\n\r\nconst list_fields = [\r\n  {\r\n    key: 'name',\r\n    label: '名字',\r\n  },\r\n  {\r\n    key: 'phone',\r\n    label: '電話',\r\n  },\r\n  {\r\n    key: 'order_time',\r\n    label: '時間',\r\n  },\r\n  {\r\n    key: 'sum',\r\n    label: '小計',\r\n  }\r\n];\r\n\r\nexport default {\r\n  name: 'ShowOrders',\r\n  data () {\r\n    return {\r\n      isLoading: true,\r\n      adminDoc: null,\r\n      formListSheet: null,\r\n      formListRows: null,\r\n      displayForm: {\r\n        init: {},\r\n        list: [],\r\n        options: []\r\n      },\r\n      interval:null,\r\n      fields,\r\n      list_fields,\r\n      //訂單總資料\r\n      orders: {\r\n        ori: [],\r\n        noon: {\r\n          is_take: [],\r\n          not_take: []\r\n        },\r\n        night: {\r\n          is_take: [],\r\n          not_take: []\r\n        }\r\n      },\r\n      //訂單顯示方式\r\n      viewList: [\r\n        {\r\n          time: \"noon\",\r\n          label: \"上午\",\r\n          tabs: [\r\n            {\r\n              label: \"午未取\",\r\n              key: \"not_take\",\r\n              is_take: false\r\n            },\r\n            {\r\n              label: \"午已取\",\r\n              key: \"is_take\",\r\n              is_take: true\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          time: \"night\",\r\n          label: \"上午\",\r\n          tabs: [\r\n            {\r\n              label: \"晚未取\",\r\n              key: \"not_take\",\r\n              is_take: false\r\n            },\r\n            {\r\n              label: \"晚已取\",\r\n              key: \"is_take\",\r\n              is_take: true\r\n            }\r\n          ]\r\n        }\r\n      ],\r\n      showBy: {\r\n        card: true,\r\n        list: false\r\n      },\r\n      count: {\r\n        is_take: 0,\r\n        not_take: 0\r\n      },\r\n      //編輯訂單\r\n      editModal: false,\r\n      editingOrder: {\r\n        key: null,\r\n        name: null,\r\n        phone: null,\r\n        order_time: null,\r\n        order_time_format: null,\r\n        note: null,\r\n        detail: null,\r\n        count: 0,\r\n        sum: 0,\r\n        justifyPrice: 0,\r\n      },\r\n      orderTime: null,\r\n      itemList: {\r\n        rows: [],\r\n        byKey: {}\r\n      },\r\n      menu: []\r\n    }\r\n  },\r\n  components: {\r\n    Loading,\r\n  },\r\n  created() {\r\n    moment.locale(\"zh-tw\");\r\n    this.accessSpreadSheet();\r\n    this.autoUpdate();\r\n  },\r\n  methods:{\r\n    async accessSpreadSheet() {\r\n      this.adminDoc = await getSettingDoc();\r\n      this.formListSheet = this.adminDoc.sheetsByTitle['表單列表'];\r\n      this.formListRows = await this.formListSheet.getRows();\r\n      const itemListSheet = this.adminDoc.sheetsByTitle['品項'];\r\n      const itemListRows = await itemListSheet.getRows();\r\n      //品項資料\r\n      for (let index = 0; index < itemListRows.length; index++) {\r\n        const item = itemListRows[index];\r\n        //品項\r\n        if (item.id) {\r\n          this.itemList.rows.push(item);\r\n          this.itemList.byKey[item.id] = item;\r\n        }\r\n      }\r\n      \r\n      this.init();\r\n      this.selectForm();\r\n    },\r\n    async init() {\r\n      //表單設定\r\n      this.displayForm.list = [];\r\n      this.displayForm.options = [];\r\n      for (let index = this.formListRows.length - 1; index >= 0; index--) {\r\n        const formRow = this.formListRows[index];\r\n        \r\n        formRow.order_time = JSON.parse(formRow.order_time);\r\n        formRow.groups = JSON.parse(formRow.groups);\r\n        //表單列表\r\n        this.displayForm.list.push(formRow);\r\n        this.displayForm.options.push({\r\n          text: formRow.title,\r\n          value: formRow.sheetTitle\r\n        });\r\n        //初始顯示表單\r\n        if (this.displayForm.init.sheetTitle == null) {\r\n          if (moment().isAfter(formRow.start_time) && moment().isBefore(formRow.end_time)) {\r\n            this.displayForm.init = formRow;\r\n            this.menu = await getMenu(this.adminDoc, this.displayForm.init.groups, true);\r\n          }\r\n        }\r\n      }\r\n    },\r\n    //顯示預訂清單\r\n    async selectForm() {\r\n      this.isLoading = true;\r\n      //預設最後一筆\r\n      if (this.displayForm.init.sheetTitle == null) {\r\n        this.displayForm.init = this.formListRows[this.formListRows.length - 1];\r\n        this.menu = await getMenu(this.adminDoc, this.displayForm.init.groups, true);\r\n      }\r\n      //取餐時間\r\n      this.orderTime = this.displayForm.init.order_time;\r\n      const orderDoc = await getOrderDoc();\r\n      const sheet = orderDoc.sheetsByTitle[this.displayForm.init.sheetTitle];\r\n      const sheetRows = await sheet.getRows();\r\n      \r\n      this.orders.ori = sheetRows;\r\n      this.setOrdersData();\r\n      //停止loading\r\n      this.isLoading = false;\r\n    },\r\n    //設定已取未取時間\r\n    setOrdersData: function() {\r\n      let rows = this.orders.ori;\r\n      this.orders.noon = {\r\n        is_take: [],\r\n        not_take: []\r\n      }\r\n      this.orders.night = {\r\n        is_take: [],\r\n        not_take: []\r\n      }\r\n\r\n      for (let index = 0; index < rows.length; index++) {\r\n        const _record = rows[index];\r\n        let _orderTime = _record.order_time;\r\n        let _orderTime_hm = moment(_orderTime).format(\"HH:mm\");\r\n        _record.parseDetail = JSON.parse(_record.detail);\r\n        \r\n        _record.no = index + 1;\r\n        //上午\r\n        if (moment(\"2000-01-01 \" + _orderTime_hm).isBefore(\"2000-01-01 14:00\")) {\r\n          _record.time = \"noon\";\r\n          //未取\r\n          if (_record.take_time == \"\") {\r\n            this.orders.noon.not_take.push(_record);\r\n            _record.is_take = false;\r\n          } else {\r\n            this.orders.noon.is_take.push(_record);\r\n            _record.is_take = true;\r\n          }\r\n        }\r\n        //下午\r\n        else {\r\n          _record.time = \"night\";\r\n          //未取\r\n          if (_record.take_time == \"\") {\r\n            this.orders.night.not_take.push(_record);\r\n            _record.is_take = false;\r\n          } else {\r\n            this.orders.night.is_take.push(_record);\r\n            _record.is_take = true;\r\n          }\r\n        }\r\n      }\r\n    },\r\n    //自動更新\r\n    autoUpdate: function () {\r\n      this.interval = setInterval(() => {\r\n        this.selectForm();\r\n        console.log(moment().format() + ' loading complete');\r\n      },60000);\r\n    },\r\n    stopUpdate: function() {\r\n      clearInterval(this.interval);\r\n    },\r\n    //切換已取未取\r\n    async switchTakeStatus(order) {\r\n      this.isLoading = true;\r\n      //已取要取消\r\n      if (!order.is_take) {\r\n        order.take_time = \"\";\r\n        order.is_take = false;\r\n      } else {\r\n        order.take_time = moment().format();\r\n        order.is_take = true;\r\n      }\r\n      this.setOrdersData();\r\n\r\n      await order.save({\r\n        raw: true\r\n      });\r\n      this.isLoading = false;\r\n    },\r\n    //單品總價\r\n    getItemSum: function(item) {\r\n      return item.sum = item.price * item.number;\r\n    },\r\n    //取得訂購數量\r\n    getOrderData: function(order, group, item) {\r\n      for (let index = 0; index < order.parseDetail.length; index++) {\r\n        const _item = order.parseDetail[index];\r\n        \r\n        if (_item.key == item.key) {\r\n          return _item;\r\n        }\r\n      }\r\n\r\n      return null;\r\n    },\r\n    //計算總數\r\n    getOrderCount: function(detail) {\r\n      let count = 0;\r\n\r\n      if (detail != null) {\r\n        for (let index = 0; index < detail.length; index++) {\r\n          const item = detail[index];\r\n          \r\n          count += item.number;\r\n        }\r\n      }\r\n\r\n      return count;\r\n    },\r\n    //計算總價(用其他金額來調整)\r\n    getOrderSum: function(order) {\r\n      let sum = 0;\r\n\r\n      if (order.detail != null) {\r\n        for (let index = 0; index < order.detail.length; index++) {\r\n          const item = order.detail[index];\r\n          \r\n          sum += item.number * item.price;\r\n        }\r\n      }\r\n      //加其他金額\r\n      sum += order.justifyPrice * 1;\r\n\r\n      return sum;\r\n    },\r\n    noteTohtml: function(note) {\r\n      return note.replaceAll(\"\\n\", \"<br>\");\r\n    },\r\n    //編輯訂單\r\n    editOrder: function(key) {\r\n      let order = this.orders[key];\r\n\r\n      this.editingOrder.order_time_format = moment(order.order_time).format(\"HH:mm\");\r\n      this.editingOrder.key = key;\r\n      this.editingOrder.name = order.name;\r\n      this.editingOrder.phone = order.phone;\r\n      this.editingOrder.order_time = order.order_time;\r\n      this.editingOrder.note = order.note.replaceAll(\"<br>\", \"\\n\");\r\n      //deep copy\r\n      let _fullMenu = [];\r\n      for (let groupIndex = 0; groupIndex < this.menu.length; groupIndex++) { \r\n        const group = this.menu[groupIndex];\r\n        \r\n        for (let itemIndex = 0; itemIndex < group.items.length; itemIndex++) { \r\n          const _item = group.items[itemIndex];\r\n          let _number = 0;\r\n          let _sum = 0;\r\n          const orderData = this.getOrderData(order, group, _item);\r\n          if (orderData != null) {\r\n            _number = orderData.number;\r\n            _sum = orderData.sum;\r\n          }\r\n          \r\n          _fullMenu.push({\r\n            key: _item.key,\r\n            title: _item.title,\r\n            price: _item.price,\r\n            number: _number,\r\n            sum: _sum,\r\n          });\r\n        }\r\n      }\r\n      this.editingOrder.detail = _fullMenu;\r\n      this.editingOrder.count = order.count;\r\n      this.editingOrder.sum = order.sum;\r\n      this.editingOrder.justifyPrice = order.justifyPrice ? order.justifyPrice : 0;\r\n      \r\n      this.editModal = true;\r\n      this.stopUpdate();\r\n    },\r\n    editCancel: function() {\r\n      this.autoUpdate();\r\n      this.editModal = false;\r\n    },\r\n    editConfirm: async function() {\r\n      let key = this.editingOrder.key;\r\n      let order = this.orders.ori[key];\r\n\r\n      order.name = this.editingOrder.name;\r\n      order.phone = this.editingOrder.phone;\r\n      order.order_time = moment(this.editingOrder.order_time).format(\"YYYY/MM/DD\") + \" \" + this.editingOrder.order_time_format;\r\n      order.note = this.editingOrder.note;\r\n\r\n      //只放有點的餐\r\n      let _detail = [];\r\n      for (let index = 0; index < this.editingOrder.detail.length; index++) {\r\n        const item = this.editingOrder.detail[index];\r\n        \r\n        if (item.sum > 0) {\r\n          _detail.push(item);\r\n        }\r\n      }\r\n      order.detail = JSON.stringify(_detail);\r\n      order.parseDetail = _detail;\r\n      order.count = this.getOrderCount(_detail);\r\n      order.sum = this.getOrderSum(this.editingOrder);\r\n      order.justifyPrice = this.editingOrder.justifyPrice;\r\n\r\n      await order.save({\r\n        raw: true\r\n      });\r\n\r\n      this.editModal = false;\r\n      this.autoUpdate();\r\n    },\r\n  }\r\n}\r\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShowOrders.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShowOrders.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ShowOrders.vue?vue&type=template&id=2c5776cb&\"\nimport script from \"./ShowOrders.vue?vue&type=script&lang=js&\"\nexport * from \"./ShowOrders.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}