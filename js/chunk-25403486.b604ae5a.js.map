{"version":3,"sources":["webpack:///./src/views/getFileId.js","webpack:///./src/views/getMenu.js","webpack:///./src/views/ItemList.js"],"names":["getFileId","url","match","module","exports","require","ItemList","getMenu","adminDoc","groups","showAll","_menu","groupIndex","_itemList","Object","hasOwnProperty","call","group","show","_type","_items","_images","sets","setIndex","set","_subItems","items","forEach","_item","_itemData","byKey","push","key","name","title","price","number","subItems","imgUrl","fileId","showImg","type","images","rows","itemListSheet","sheetsByTitle","getRows","itemListRows","index","length","item","id"],"mappings":"iGAAA,SAASA,EAAUC,GACf,OAAOA,EAAIC,MAAM,cAGrBC,EAAOC,QAAU,CACbJ,c,0WCLJ,MAAsBK,EAAQ,QAAtBL,EAAR,EAAQA,UACR,EAAqBK,EAAQ,QAArBC,EAAR,EAAQA,S,SAQOC,E,qFAAf,WAAuBC,EAAUC,GAAjC,kHAAyCC,EAAzC,gCACMC,EAAQ,GADd,SAEwBL,EAASE,GAFjC,OAIE,IAAWI,KAFPC,EAFN,OAI2BJ,EACnBK,OAAOC,eAAeC,KAAKP,EAAQG,KAC/BK,EAAQR,EAAOG,IAEjBF,GAAWO,EAAMC,OAAM,WACzB,IAAIC,EAAQ,KACRC,EAAS,GACTC,EAAU,GAEd,GAAIJ,EAAMK,KAGR,IAAK,IAAMC,KAFXJ,EAAQ,MAEeF,EAAMK,KAC3B,GAAIR,OAAOC,eAAeC,KAAKC,EAAMK,KAAMC,GAAW,CACpD,IAAMC,EAAMP,EAAMK,KAAKC,IAEnBb,GAAWc,EAAIN,OAAM,WACvB,IAAIO,EAAY,GAkBhB,GAhBAD,EAAIE,MAAMC,SAAQ,SAAAC,GAChB,IAAIC,EAAYhB,EAAUiB,MAAMF,GAEhCH,EAAUM,KAAK,CACbC,IAAKJ,EACLK,KAAMJ,EAAUI,UAGpBb,EAAOW,KAAK,CACVC,IAAKR,EAAIQ,IACTE,MAAOV,EAAIU,MACXC,MAAOX,EAAIW,MACXC,OAAQ,EACRC,SAAUZ,IAGM,MAAdD,EAAIc,OAAgB,CACtB,IAAIC,EAASvC,EAAUwB,EAAIc,QAC3BjB,EAAQU,KAAKQ,IArBQ,GA4B3BtB,EAAMS,QACRP,EAAQ,SAERF,EAAMS,MAAMC,SAAQ,SAAAC,GAClB,GAAIlB,GAAWkB,EAAMV,KAAM,CACzB,IAAIW,EAAYhB,EAAUiB,MAAMF,EAAMI,KAStC,GAPAZ,EAAOW,KAAK,CACVC,IAAKJ,EAAMI,IACXE,MAAOL,EAAUI,KACjBE,MAAOP,EAAMO,MACbC,OAAQ,IAGNR,EAAMY,SACa,MAAjBX,EAAU5B,IAAa,CACzB,IAAIsC,EAASvC,EAAU6B,EAAU5B,KACjCoB,EAAQU,KAAKQ,SAOvB5B,EAAMoB,KAAK,CACTU,KAAMtB,EACNe,MAAOjB,EAAMiB,MACbR,MAAON,EACPsB,OAAQrB,IApEe,IARjC,yBAkFSV,GAlFT,2C,wBAqFAR,EAAOC,QAAU,CACfG,Y,wVC/FaD,E,mFAAf,WAAwBE,GAAxB,sGACQK,EAAY,CACZ8B,KAAM,GACNb,MAAO,IAGLc,EAAgBpC,EAASqC,cAAc,MANjD,SAO+BD,EAAcE,UAP7C,OASI,IAFMC,EAPV,OASaC,EAAQ,EAAGA,EAAQD,EAAaE,OAAQD,IACvCE,EAAOH,EAAaC,GAEtBE,EAAKC,KACLtC,EAAU8B,KAAKZ,KAAKmB,GACpBrC,EAAUiB,MAAMoB,EAAKC,IAAMD,GAdvC,yBAkBWrC,GAlBX,2C,wBAqBAV,EAAOC,QAAS,CACZE","file":"js/chunk-25403486.b604ae5a.js","sourcesContent":["function getFileId(url) {\r\n    return url.match(/[-\\w]{25,}/);\r\n}\r\n\r\nmodule.exports = {\r\n    getFileId,\r\n}","const { getFileId } = require('./getFileId');\r\nconst { ItemList } = require('./ItemList');\r\n/**\r\n * \r\n * @param {object} adminDoc 管理文件\r\n * @param {Array} groups 菜單區塊\r\n * @param {Boolean} showAll 是否顯示全部\r\n * @returns \r\n */\r\nasync function getMenu(adminDoc, groups, showAll = false) {\r\n  let _menu = [];\r\n  let _itemList = await ItemList(adminDoc);\r\n\r\n  for (const groupIndex in groups) {\r\n    if (Object.hasOwnProperty.call(groups, groupIndex)) {\r\n      const group = groups[groupIndex];\r\n      //顯示與否\r\n      if (showAll || group.show) {\r\n        let _type = null;\r\n        let _items = [];\r\n        let _images = [];\r\n        //套餐\r\n        if (group.sets) {\r\n          _type = 'set';\r\n\r\n          for (const setIndex in group.sets) {\r\n            if (Object.hasOwnProperty.call(group.sets, setIndex)) {\r\n              const set = group.sets[setIndex];\r\n              \r\n              if (showAll || set.show) {\r\n                let _subItems = [];\r\n\r\n                set.items.forEach(_item => {\r\n                  let _itemData = _itemList.byKey[_item];\r\n                  \r\n                  _subItems.push({\r\n                    key: _item,\r\n                    name: _itemData.name\r\n                  });\r\n                });\r\n                _items.push({\r\n                  key: set.key,\r\n                  title: set.title,\r\n                  price: set.price,\r\n                  number: 0,\r\n                  subItems: _subItems\r\n                });\r\n                \r\n                if (set.imgUrl != null) {\r\n                  let fileId = getFileId(set.imgUrl);\r\n                  _images.push(fileId);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        //單點\r\n        if (group.items) {\r\n          _type = 'single';\r\n\r\n          group.items.forEach(_item => {\r\n            if (showAll || _item.show) {\r\n              let _itemData = _itemList.byKey[_item.key];\r\n\r\n              _items.push({\r\n                key: _item.key,\r\n                title: _itemData.name,\r\n                price: _item.price,\r\n                number: 0\r\n              });\r\n\r\n              if (_item.showImg) {\r\n                if (_itemData.url != null) {\r\n                  let fileId = getFileId(_itemData.url);\r\n                  _images.push(fileId);\r\n                }\r\n              }\r\n            }\r\n          });\r\n        }\r\n\r\n        _menu.push({\r\n          type: _type,\r\n          title: group.title,\r\n          items: _items,\r\n          images: _images\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  return _menu;\r\n}\r\n\r\nmodule.exports = {\r\n  getMenu\r\n}","async function ItemList(adminDoc) {\r\n    let _itemList = {\r\n        rows: [],\r\n        byKey: {}\r\n    };\r\n\r\n    const itemListSheet = adminDoc.sheetsByTitle['品項'];\r\n    const itemListRows = await itemListSheet.getRows();\r\n    //品項資料\r\n    for (let index = 0; index < itemListRows.length; index++) {\r\n        const item = itemListRows[index];\r\n        //品項\r\n        if (item.id) {\r\n            _itemList.rows.push(item);\r\n            _itemList.byKey[item.id] = item;\r\n        }\r\n    }\r\n\r\n    return _itemList;\r\n}\r\n\r\nmodule.exports ={\r\n    ItemList\r\n}"],"sourceRoot":""}